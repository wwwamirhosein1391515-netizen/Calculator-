<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metal Weight Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <style>
        body {
            font-family: 'Vazirmatn', 'Tahoma', sans-serif;
            background: #FFFFFF;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(30px);
            border: 1.5px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.08);
            transition: all 0.3s;
        }

        .glass-input {
            background: rgba(255, 255, 255, 0.7);
            border: 1.5px solid rgba(229, 231, 235, 0.8);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.03);
            color: #1f2937;
            transition: all 0.3s;
            font-family: 'Tahoma', sans-serif;
        }

        .glass-input:focus {
            background: rgba(255, 255, 255, 0.85);
            border-color: rgba(156, 163, 175, 0.8);
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FFFFFF;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s;
        }

        #intro-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .intro-text {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            font-weight: 700;
            color: #1a1a1a;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.8s cubic-bezier(0.22, 1, 0.36, 1);
        }

        #intro-hello {
            font-size: clamp(3rem, 12vw, 5rem);
        }

        #intro-welcome {
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            margin-top: 2rem;
        }

        .user-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 9999px;
            background: rgba(255, 255, 255, 0.85);
            border: 1.5px solid rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
            z-index: 50;
        }

        .nav-tab {
            position: relative;
            transition: all 0.3s;
        }

        .nav-tab.active {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            font-weight: 700;
        }

        .app-container {
            opacity: 0;
            transition: opacity 1s;
        }

        .app-visible {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #FFFFFF; z-index: 10000; display: flex; justify-content: center; align-items: center;">
        <div class="glass-panel p-8 rounded-3xl flex flex-col gap-5 w-full max-w-sm text-center">
            <h2 class="text-2xl font-bold">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯</h2>
            <input type="text" id="login-fname" class="glass-input w-full h-12 rounded-xl text-center text-lg" placeholder="Ù†Ø§Ù…">
            <input type="text" id="login-lname" class="glass-input w-full h-12 rounded-xl text-center text-lg" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
            <button onclick="submitLogin()" class="glass-panel w-full h-12 rounded-xl font-bold text-lg hover:bg-white/90 transition-all">ÙˆØ±ÙˆØ¯</button>
        </div>
    </div>

    <!-- Intro Overlay -->
    <div id="intro-overlay">
        <div id="intro-hello" class="intro-text">Hello</div>
        <div id="intro-welcome" class="intro-text hidden">Welcome</div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="app-container w-full max-w-md px-4">
        <div id="user-badge" class="user-badge hidden"></div>

        <header class="mb-6 text-center">
            <h1 class="text-3xl font-bold text-gray-800">Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± ÙˆØ²Ù† ÙÙ„Ø²Ø§Øª</h1>
        </header>

        <main class="glass-panel rounded-3xl p-6">
            <!-- Navigation -->
            <div class="glass-panel rounded-full p-1.5 flex gap-1 mb-6">
                <button onclick="switchTab('calc')" id="tab-calc" class="nav-tab active flex-1 py-2 rounded-full text-sm">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
                <button onclick="switchTab('settings')" id="tab-settings" class="nav-tab flex-1 py-2 rounded-full text-sm">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
            </div>

            <!-- Content Area -->
            <div id="content-area"></div>
        </main>
    </div>

    <script>
        let userData = { firstName: '', lastName: '' };
        let currentTab = 'calc';

        // Metal densities (g/cmÂ³)
        const metalDensities = {
            'gold': 19.32,
            'silver': 10.49,
            'copper': 8.96,
            'aluminum': 2.70,
            'iron': 7.87,
            'platinum': 21.45,
            'titanium': 4.51,
            'zinc': 7.14,
            'nickel': 8.91,
            'tin': 7.31
        };

        const metalNames = {
            'gold': 'Ø·Ù„Ø§',
            'silver': 'Ù†Ù‚Ø±Ù‡',
            'copper': 'Ù…Ø³',
            'aluminum': 'Ø¢Ù„ÙˆÙ…ÛŒÙ†ÛŒÙˆÙ…',
            'iron': 'Ø¢Ù‡Ù†',
            'platinum': 'Ù¾Ù„Ø§ØªÛŒÙ†',
            'titanium': 'ØªÛŒØªØ§Ù†ÛŒÙˆÙ…',
            'zinc': 'Ø±ÙˆÛŒ',
            'nickel': 'Ù†ÛŒÚ©Ù„',
            'tin': 'Ù‚Ù„Ø¹'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkUserAndStart();
        });

        function checkUserAndStart() {
            const savedFName = localStorage.getItem('metal_calc_fname');
            const savedLName = localStorage.getItem('metal_calc_lname');

            if (savedFName && savedLName) {
                userData.firstName = savedFName;
                userData.lastName = savedLName;
                startIntro();
            } else {
                document.getElementById('login-overlay').style.display = 'flex';
            }
        }

        function submitLogin() {
            const fName = document.getElementById('login-fname').value.trim();
            const lName = document.getElementById('login-lname').value.trim();

            if (!fName || !lName) {
                alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }

            localStorage.setItem('metal_calc_fname', fName);
            localStorage.setItem('metal_calc_lname', lName);
            userData.firstName = fName;
            userData.lastName = lName;

            const loginOverlay = document.getElementById('login-overlay');
            loginOverlay.style.opacity = '0';
            setTimeout(() => {
                loginOverlay.style.display = 'none';
                startIntro();
            }, 1000);
        }

        function startIntro() {
            const overlay = document.getElementById('intro-overlay');
            const hello = document.getElementById('intro-hello');
            const welcome = document.getElementById('intro-welcome');
            const mainApp = document.getElementById('main-app');
            const badge = document.getElementById('user-badge');

            badge.innerText = `${userData.firstName} Ø¹Ø²ÛŒØ²`;
            badge.classList.remove('hidden');

            overlay.classList.add('active');

            setTimeout(() => {
                hello.style.opacity = '1';
                hello.style.transform = 'translateY(0)';
            }, 300);

            setTimeout(() => {
                hello.style.opacity = '0';
                hello.style.transform = 'translateY(-30px)';
            }, 1800);

            setTimeout(() => {
                hello.style.display = 'none';
                welcome.classList.remove('hidden');
                welcome.style.opacity = '1';
                welcome.style.transform = 'translateY(0)';
            }, 2300);

            setTimeout(() => {
                overlay.style.opacity = '0';
                mainApp.classList.add('app-visible');
                setTimeout(() => {
                    overlay.style.display = 'none';
                    renderCalc();
                }, 1500);
            }, 5000);
        }

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`tab-${tab}`).classList.add('active');

            if (tab === 'calc') {
                renderCalc();
            } else {
                renderSettings();
            }
        }

        function renderCalc() {
            const container = document.getElementById('content-area');
            
            let metalOptions = '';
            for (const [key, name] of Object.entries(metalNames)) {
                metalOptions += `<option value="${key}">${name}</option>`;
            }

            container.innerHTML = `
                <div class="flex flex-col gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Ù†ÙˆØ¹ ÙÙ„Ø²:</label>
                        <select id="metal-select" class="glass-input w-full h-12 rounded-xl text-center">
                            ${metalOptions}
                        </select>
                    </div>

                    <div class="glass-panel rounded-2xl p-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-3 text-center">Ø§Ø¨Ø¹Ø§Ø¯ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)</label>
                        <div class="flex gap-3">
                            <div class="flex-1">
                                <input type="number" id="length" class="glass-input w-full h-12 rounded-xl text-center" placeholder="Ø·ÙˆÙ„" step="0.01">
                            </div>
                            <div class="flex-1">
                                <input type="number" id="width" class="glass-input w-full h-12 rounded-xl text-center" placeholder="Ø¹Ø±Ø¶" step="0.01">
                            </div>
                            <div class="flex-1">
                                <input type="number" id="height" class="glass-input w-full h-12 rounded-xl text-center" placeholder="Ø§Ø±ØªÙØ§Ø¹" step="0.01">
                            </div>
                        </div>
                    </div>

                    <button onclick="calculateWeight()" class="glass-panel w-full h-14 rounded-xl font-bold text-lg hover:bg-white/90 transition-all" style="background: rgba(220, 252, 231, 0.7); color: #059669;">Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆØ²Ù†</button>

                    <div id="result" class="glass-panel rounded-2xl p-6 text-center min-h-[100px] flex items-center justify-center">
                        <span class="text-gray-500">Ù†ØªÛŒØ¬Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</span>
                    </div>
                </div>
            `;
        }

        function calculateWeight() {
            const metal = document.getElementById('metal-select').value;
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const resultDiv = document.getElementById('result');

            if (isNaN(length) || isNaN(width) || isNaN(height) || length <= 0 || width <= 0 || height <= 0) {
                resultDiv.innerHTML = '<span class="text-red-600 font-bold">Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… Ø§Ø¨Ø¹Ø§Ø¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</span>';
                return;
            }

            const volume = length * width * height; // cmÂ³
            const density = metalDensities[metal];
            const weight = volume * density; // grams

            const weightKg = weight / 1000;

            resultDiv.innerHTML = `
                <div class="flex flex-col gap-3 w-full">
                    <div class="text-2xl font-bold text-green-700">${metalNames[metal]}</div>
                    <div class="flex flex-col gap-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Ø­Ø¬Ù…:</span>
                            <span class="font-mono font-bold">${volume.toFixed(2)} cmÂ³</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Ú†Ú¯Ø§Ù„ÛŒ:</span>
                            <span class="font-mono font-bold">${density} g/cmÂ³</span>
                        </div>
                        <div class="h-px bg-gray-300 my-2"></div>
                        <div class="flex justify-between items-center">
                            <span class="text-base font-bold text-gray-800">ÙˆØ²Ù†:</span>
                            <span class="text-xl font-mono font-bold text-blue-700">${weight.toFixed(2)} Ú¯Ø±Ù…</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-gray-600">Ù…Ø¹Ø§Ø¯Ù„:</span>
                            <span class="font-mono font-bold">${weightKg.toFixed(4)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSettings() {
            const container = document.getElementById('content-area');
            container.innerHTML = `
                <div class="flex flex-col gap-6">
                    <div class="glass-panel rounded-2xl p-6 flex flex-col items-center gap-3">
                        <div class="w-16 h-16 rounded-full bg-gray-300/50 flex items-center justify-center text-3xl">ğŸ‘¤</div>
                        <div class="text-sm text-gray-500">Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ</div>
                        <div class="text-lg font-bold text-gray-800">${userData.firstName} ${userData.lastName}</div>
                    </div>

                    <div class="glass-panel rounded-2xl p-6">
                        <h3 class="font-bold text-center mb-3 border-b border-gray-300/30 pb-2">Ø§Ø¹ØªØ¨Ø§Ø±Ø§Øª</h3>
                        <div class="flex flex-col gap-3 text-sm">
                            <div>
                                <div class="text-xs text-gray-500">Ø·Ø±Ø§Ø­ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³:</div>
                                <div class="font-bold">Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ù†Ø§Ø¯Ø±ÛŒ</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-500">Ø§Ø³Ù¾Ø§Ù†Ø³Ø± Ùˆ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²:</div>
                                <div class="font-bold">Ø§Ø¨ÙˆØ§Ù„ÙØ¶Ù„ Ø­Ø¶Ø±ØªÛŒâ€ŒØ²Ø§Ø¯Ù‡</div>
                            </div>
                        </div>
                    </div>

                    <button onclick="logout()" class="glass-panel w-full h-12 rounded-xl font-bold hover:bg-red-50 transition-all" style="color: #dc2626;">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</button>
                </div>
            `;
        }

        function logout() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
                localStorage.removeItem('metal_calc_fname');
                localStorage.removeItem('metal_calc_lname');
                location.reload();
            }
        }
    </script>
</body>
</html>
